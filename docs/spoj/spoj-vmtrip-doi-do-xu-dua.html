<!doctype html>
<html>

<head>
    <!-- Font Awesome -->
    <script type="text/javascript" async src="https://use.fontawesome.com/d96de7908c.js"></script>
    <!-- Post Page Title -->
    <title>[SPOJ] VMTRIP - Dời Đô xứ Dừa</title>
    <!-- Mobile first -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap CSS -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald" rel="stylesheet">

    <!-- Bootstrap Dropdown Hover CSS -->
    <link href="/css/animate.min.css" rel="stylesheet" type="text/css">
    <link href="/css/bootstrap-dropdownhover.min.css" rel="stylesheet" type="text/css">

    <!-- Stylesheet of the page -->
    <link rel="stylesheet" href="/css/stylesheet.css" type="text/css" />
    <link rel="stylesheet" href="/css/jumbotron.css" type="text/css" />
    <link rel="stylesheet" href="/css/navbar.css" type="text/css" />
    <link rel="stylesheet" href="/css/sidebar.css" type="text/css" />
    <link rel="stylesheet" href="/css/social-icon-button.css" type="text/css" />
    <link rel="stylesheet" href="/css/footer.css" type="text/css" />
    <link rel="stylesheet" href="/css/search.css" type="text/css" />
    <link rel="stylesheet" href="/css/navbar-hover-dropdown.css" type="text/css" />
    <link rel="stylesheet" href="/css/label.css" type="text/css" />
    <link rel="stylesheet" href="/css/post-preview.css" type="text/css" />
    <link rel="stylesheet" href="/css/post-preview-side.css" type="text/css" />

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="57x57" href="/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <link rel="manifest" href="/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" href="/css/breadcrumb.css" type="text/css" />
    <link rel="stylesheet" href="/css/tag_list.css" type="text/css" />
    <link rel="stylesheet" href="/css/prev-next.css" type="text/css" />
    <link rel="stylesheet" href="/css/share-box.css" type="text/css" />
    <link rel="stylesheet" href="/css/syntax.css" type="text/css" />
    <link rel="stylesheet" href="/css/youtube-video.css" type="text/css" />

    <!-- SEO -->
    <meta name="description" content="Đề: http://vnoi.info/problems/show/VMTRIP/

Sau khi thống nhất vương quốc dừa một thời gian, vị vua mới là Pirakute lại ăn ngủ không yên vì tình tr..." />

    <!-- Facebook meta tags -->
    <meta property="og:type" content="article" />
    <meta property="og:title" content="[SPOJ] VMTRIP - Dời Đô xứ Dừa" />
    <meta property="og:image" content="/img/uploads/VMTRIP_graph.jpg" />
    <meta property="og:description" content="Đề: http://vnoi.info/problems/show/VMTRIP/

Sau khi thống nhất vương quốc dừa một thời gian, vị vua mới là Pirakute lại ăn ngủ không yên vì tình tr..." />
    <meta property="fb:app_id" content="155198375049942" />

    <!-- MathLab -->
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</head>

<body>

    <!-- Facebook SDK -->
    <div id="fb-root"></div>
    <script>(function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = 'https://connect.facebook.net/vi_VN/sdk.js#xfbml=1&version=v3.2&appId=500534520394032&autoLogAppEvents=1';
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script>

    <!-- Navbar -->
    <nav class="navbar navbar-default navbar-static-top">
        <div class="navbar-header">
            <a class="navbar-brand" href="https://cowboycoder.vercel.app">Cowboy Coder</a>
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>

        <div class="collapse navbar-collapse" id="myNavbar">
            <div class="container-fluid">

                <ul class="nav navbar-nav">

                    <li class="dropdown">

                        <a class="navbar-button dropdown-toggle" data-hover="dropdown" href="/categories/spoj"
                            data-animations="none none none none">SPOJ</a>
                    </li>

                    <li class="dropdown">

                        <a class="navbar-button dropdown-toggle" data-hover="dropdown" href="/categories/codeforces"
                            data-animations="none none none none">Codeforces</a>
                    </li>

                    <li class="dropdown">

                        <a class="navbar-button dropdown-toggle" data-hover="dropdown" href="/categories/article"
                            data-animations="none none none none">Bài viết</a>
                    </li>

                    <li><a href="/tag">Tag</a></li>
                    <li><a href="/about">About us</a></li>
                </ul>

            </div>
        </div>
    </nav>
    <!-- Navbar -->

    <!-- Jumbotron -->
    <div class="jumbotron">
        <div class="container">
            <h1>Cowboy Coder</h1>
            <h2>To code like a Cowboy!</h2>
        </div>
    </div>
    <!-- Jumbotron -->



    <div class="container">

        <!-- Content -->
        <div class="row">
            <div class="col-sm-9">
                <div class="breadcrumb">




                    <a class="breadcrumb-home" href="https://cowboycoder.vercel.app/">Home</a>

                    <span class="fa fa-angle-right"></span>

                    <a class="breadcrumb-category" href="https://cowboycoder.vercel.app/categories/spoj">SPOJ</a>

                    <span class="fa fa-angle-right"></span>
                    <a class="breadcrumb-post" href="#">[SPOJ] VMTRIP - Dời Đô xứ Dừa</a>
                </div>
                <h1 class="content-title">[SPOJ] VMTRIP - Dời Đô xứ Dừa</h1>
                <h2 class="content-author">Đăng bởi itsjustwinds lúc 11 Aug 2017</h2>
                <div class="content">
                    <h1 id="đề-httpvnoiinfoproblemsshowvmtrip">Đề: <a
                            href="http://vnoi.info/problems/show/VMTRIP/">http://vnoi.info/problems/show/VMTRIP/</a>
                    </h1>

                    <p>Sau khi thống nhất vương quốc dừa một thời gian, vị vua mới là Pirakute lại ăn ngủ không yên vì
                        tình trạng đất nước vẫn chưa được ổn định, lạm phát dừa làm cho đất nước ngày một yếu đi, trái
                        dừa lại dần có nguy cơ bị lạm dụng trở thành vũ khí để chọi nhau như ngày nào… Một đêm nọ
                        Pirakute nằm mơ, thấy rằng một trong những hòn đảo xa xôi trong vương quốc của mình bỗng mọc lên
                        một cây dừa vàng khổng lồ. Thế là sáng hôm sau tỉnh dậy, Pirakute đã nghĩ rằng : “Có thể rằng
                        kinh đô trên hòn đảo mà ta đang ở có phong thủy không được tốt nên đất nước mới suy yếu, lẽ
                        chăng ta nên dời đô đến hòn đảo mà ta đã nhìn thấy trong mơ !?”</p>

                    <p>Thế là ngay lập tức Pirakute đã cho triệu hồi quân thần và bàn kế sách dời đô. Sau khi nghiên cứu
                        toàn bộ hệ thống đảo trên vương quốc dừa thì hiện toàn vương quốc có tổng cộng N đảo, được đánh
                        số từ 1 tới N. Ngoài ra còn có M cây cầu dừa, mỗi cây cầu dừa nối một cặp hòn đảo với nhau để
                        mọi người có thể đi từ hòn đảo này đến hòn đảo khác. Trong các hòn đảo của vương quốc, S là hòn
                        đảo kinh đô hiện tại của vương quốc, và T chính là hòn đảo mà Pirakute đã mơ thấy và sẽ dời đô
                        đến. Một hành trình đi từ S đến T qua các cây cầu dừa có độ dài bằng số lượng hòn đảo phân biệt
                        phải đi qua trên hành trình đó. Để tiết kiệm chi phí dời đô, Pirakute quyết định sẽ chọn một
                        hành trình dời đô có độ dài ngắn nhất. Tuy nhiên Pirakute nhận thấy rằng có rất nhiều cách chọn
                        hành trình như vậy. Vốn rất thích các dãy số hoán vị nên sau một hồi suy nghĩ Pirakute đã nghĩ
                        ra cách để chọn hành trình dời đô thích hợp:</p>

                    <ul>
                        <li>Gọi K là số hòn đảo phải đi qua trên hành trình dời đô ngắn nhất đi từ S đến T.</li>
                        <li>Pirakute sẽ chọn một dãy hoán vị các số từ1 đến K: p[1], p[2], …, p[K]. Gọi là dãy hoán vị p
                        </li>
                        <li>Trong các hành trình dời đô ngắn nhất(đi qua đúng K đỉnh) từ S đến T. Pirakute sẽ chọn hành
                            trình có thứ tự từ điển nhỏ nhất theo dãy hoán vị p.</li>
                        <li>Nếu gọi a[1], a[2], …, a[K]là chỉ số của các hòn đảo phải đi qua của hành trình A. b[1],
                            b[2], …,b[K]là chỉ số các hòn đảo phải đi qua của hành trình B. Khi đó ta nói hành trình A
                            có thứ tự từ điển theo nhỏ hơn theo dãy hoán vị p so với hành trình B khi và chỉ khi tồn tại
                            một số i(1 ≤i≤K)sao cho:</li>
                        <li>
                            <p>a[p[1]] = b[p[1]]; a[p[2]] = b[p[2]]; … a[p[i-1]] = b[p[i-1]];</p>
                        </li>
                        <li>a[p[i]] &lt; b[p[i]];</li>
                    </ul>

                    <p>Tuy nhiên do có quá nhiều cách chọn hành trình dời đô nên Pirakute không thể tìm ra được hành
                        trình dời đô thích hợp. Bạn hãy giúp Pirakute tìm ra hành trình dời đô này nhé.</p>

                    <h2 id="input">Input</h2>

                    <ul>
                        <li>Dòng đầu tiên gồm 4 số N, M, S và T</li>
                        <li>M dòng tiếp theo, mỗi dòng gồm 2 số u và v là chỉ số của 2 hòn đảo mà có cây cầu nối với
                            nhau</li>
                        <li>Dòng cuối cùng là K số của dãy hoán vị p. (Chú ý giá trị K sẽ không được cho trước mà bạn
                            cần phải tìm ra theo yêu cầu của bài toán).</li>
                        <li>Dữ liệu luôn đảm bảo:</li>
                        <li>Có nhiều nhất một cây cầu dừa nối trực tiếp giữa 2 hòn đảo bất kì.</li>
                        <li>Tồn tại ít nhất một đường đi từ S đến T.</li>
                    </ul>

                    <h2 id="output">Output</h2>

                    <ul>
                        <li>Dòng duy nhất gồm K số là chỉ số của các hòn đảo phải đi qua theo thứ tự của hành trình dời
                            đô từ S đến T.</li>
                    </ul>

                    <h2 id="giới-hạn">Giới hạn:</h2>

                    <ul>
                        <li>Trong 20% số test: 1 ≤N ≤ 5000; 1 ≤M ≤ 10000;</li>
                        <li>Trong tất cả các test: 1 ≤N ≤ 100000; 1 ≤M ≤ 300000;</li>
                        <li>1 ≤S ≤N;</li>
                        <li>1 ≤T ≤N;</li>
                        <li>S luôn khác với T.</li>
                    </ul>

                    <h2 id="chấm-điểm">Chấm điểm</h2>

                    <ul>
                        <li>Bài của bạn sẽ được chấm trên thang điểm 100. Điểm mà bạn nhận được sẽ tương ứng với % test
                            mà bạn giải đúng.</li>
                        <li>Trong quá trình thi, bài của bạn sẽ chỉ được chấm với 1 test ví dụ có trong đề bài.</li>
                        <li>Khi vòng thi kết thúc, bài của bạn sẽ được chấm với bộ test đầy đủ.</li>
                    </ul>

                    <h2 id="example">Example</h2>

                    <div class="highlighter-rouge">
                        <div class="highlight">
                            <pre class="highlight"><code>Input:9 9 1 9
1 2
1 3
2 5
3 4
3 7
5 8
6 7
6 9
8 9
4 1 2 5 3

Output:
1 3 7 6 9
</code></pre>
                        </div>
                    </div>

                    <h1 id="hướng-dẫn">Hướng dẫn</h1>

                    <p><a href="http://viahold.com/1SJF">http://viahold.com/1SJF</a></p>

                    <h1 id="code">code</h1>

                    <p><a href="http://viahold.com/1SJV">http://viahold.com/1SJV</a></p>

                </div>

                <div class="tag-list">

                    <a class="tag-list-item" href="/tags/dfs">dfs</a>

                    <a class="tag-list-item" href="/tags/bfs">bfs</a>

                    <a class="tag-list-item" href="/tags/spoj">spoj</a>

                </div>

                <div class="share-box">
                    <div class="fb-like" data-layout="standard" data-action="like" data-size="small"
                        data-show-faces="true" data-share="true"></div>
                </div>

                <div class="prev-next">
                    <div class="prev-next-item previous">

                        <a href="/spoj/spoj-mdolls-nested-dolls" class="prev-next-link"><span
                                class="glyphicon glyphicon-menu-left"></span> [SPOJ] MDOLLS - Nested Dolls</a>

                    </div>
                    <div class="prev-next-item next">

                        <a href="/spoj/spoj-qbsegpar-voi05-phan-doan" class="prev-next-link">[SPOJ] QBSEGPAR - VOI05
                            Phân đoạn <span class="glyphicon glyphicon-menu-right"></span></a>

                    </div>
                </div>
                <div style="margin-bottom:5rem">
                    <div class="fb-comments" data-href="https://cowboycoder.vercel.app/spoj/spoj-vmtrip-doi-do-xu-dua"
                        data-width="100%" data-numposts="5"></div>
                </div>
            </div>

            <div class="col-sm-3">
                <aside>
                    <div class="aside-section">
                        <div class="seach-box">
                            <form class="aside-form" action="/search" method="GET">
                                <div class="input-group">
                                    <input type="text" class="form-control" id="search-box" placeholder="Tìm kiếm..."
                                        name="query" />
                                    <div class="input-group-btn">
                                        <button class="btn btn-default" type="submit" id="search-submit" />
                                        <i class="glyphicon glyphicon-search"></i>
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="aside-section">
                        <div class="label-custom">
                            <span class="label-custom-text">Follow us on Facebook!</span>
                        </div>

                        <div class="fb-page" data-href="https://www.facebook.com/cowboycoding" data-small-header="false"
                            data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true"></div>
                    </div>

                    <div class="aside-section">
                        <div class="label-custom">
                            <span class="label-custom-text">Bài viết gần đây</span>
                        </div>

                        <div class="recent">

                            <div class="post-preview-side panel panel-default">
                                <div class="post-preview-side-header">
                                    <a href="/spoj/spoj-catgo-cat-go">
                                        <div class="img-responsive-16by9">
                                            <img class="post-preview-side-img" src="/img/uploads/[spoj] - catgo.jpg" />
                                        </div>
                                    </a>
                                    <div class="post-preview-side-foreground"></div>
                                    <div class="post-preview-side-metadata">
                                        <a href="/spoj/spoj-catgo-cat-go">
                                            <h4 class="post-preview-side-title">[SPOJ] CATGO - Cắt gỗ</h4>
                                        </a>
                                        <h5 class="post-preview-side-subtitle">06 Jan 2018</h5>
                                    </div>
                                </div>
                                <div class="post-preview-side-body">
                                    <span class="post-preview-side-text">Link đề bài: http://vnoi.info/problems/CATGO/
                                        Đề bài: Giới hạn Thời gian: 0.1s Bộ nhớ: 1536MB Mã...</span>
                                </div>
                            </div>

                            <div class="post-preview-side panel panel-default">
                                <div class="post-preview-side-header">
                                    <a href="/spoj/spoj-traka-traka">
                                        <div class="img-responsive-16by9">
                                            <img class="post-preview-side-img" src="/img/uploads/[spoj] traka.jpg" />
                                        </div>
                                    </a>
                                    <div class="post-preview-side-foreground"></div>
                                    <div class="post-preview-side-metadata">
                                        <a href="/spoj/spoj-traka-traka">
                                            <h4 class="post-preview-side-title">[SPOJ] TRAKA - TRAKA</h4>
                                        </a>
                                        <h5 class="post-preview-side-subtitle">31 Oct 2017</h5>
                                    </div>
                                </div>
                                <div class="post-preview-side-body">
                                    <span class="post-preview-side-text">Link đề bài:
                                        http://vnoi.info/problems/show/TRAKA/ Đề bài: Có N người thợ, M chiếc xe. Người
                                        thứ...</span>
                                </div>
                            </div>

                            <div class="post-preview-side panel panel-default">
                                <div class="post-preview-side-header">
                                    <a href="/spoj/spoj-vosnet-social-network">
                                        <div class="img-responsive-16by9">
                                            <img class="post-preview-side-img" src="/img/uploads/[spoj] vosnet.jpg" />
                                        </div>
                                    </a>
                                    <div class="post-preview-side-foreground"></div>
                                    <div class="post-preview-side-metadata">
                                        <a href="/spoj/spoj-vosnet-social-network">
                                            <h4 class="post-preview-side-title">[SPOJ] VOSNET - Social Network</h4>
                                        </a>
                                        <h5 class="post-preview-side-subtitle">23 Oct 2017</h5>
                                    </div>
                                </div>
                                <div class="post-preview-side-body">
                                    <span class="post-preview-side-text">Link đề bài:
                                        http://vnoi.info/problems/show/VOSNET/ Đề bài: Social Network - Một cụm từ chắc
                                        ai trong...</span>
                                </div>
                            </div>

                            <div class="post-preview-side panel panel-default">
                                <div class="post-preview-side-header">
                                    <a href="/spoj/spoj-computer-may-tinh">
                                        <div class="img-responsive-16by9">
                                            <img class="post-preview-side-img" src="/img/uploads/[spoj]-computer.jpg" />
                                        </div>
                                    </a>
                                    <div class="post-preview-side-foreground"></div>
                                    <div class="post-preview-side-metadata">
                                        <a href="/spoj/spoj-computer-may-tinh">
                                            <h4 class="post-preview-side-title">[SPOJ] COMPUTER - Máy tính</h4>
                                        </a>
                                        <h5 class="post-preview-side-subtitle">14 Oct 2017</h5>
                                    </div>
                                </div>
                                <div class="post-preview-side-body">
                                    <span class="post-preview-side-text">Link đề bài :
                                        http://vnoi.info/problems/show/COMPUTER/ Đề bài: Công ty phần mềm XYZ mới mua
                                        x...</span>
                                </div>
                            </div>

                            <div class="post-preview-side panel panel-default">
                                <div class="post-preview-side-header">
                                    <a href="/article/c-co-ban-phan-27-ap-dung-c-vao-lap-trinh-thuc-te-phan-cuoi">
                                        <div class="img-responsive-16by9">
                                            <img class="post-preview-side-img"
                                                src="/img/uploads/C++ Co ban - Thumbnail.jpg" />
                                        </div>
                                    </a>
                                    <div class="post-preview-side-foreground"></div>
                                    <div class="post-preview-side-metadata">
                                        <a href="/article/c-co-ban-phan-27-ap-dung-c-vao-lap-trinh-thuc-te-phan-cuoi">
                                            <h4 class="post-preview-side-title">[C++ Cơ bản] Phần 28: Áp dụng C++ vào
                                                lập trình thực tế (phần cuối)</h4>
                                        </a>
                                        <h5 class="post-preview-side-subtitle">13 Sep 2017</h5>
                                    </div>
                                </div>
                                <div class="post-preview-side-body">
                                    <span class="post-preview-side-text">Phần trước: [C++ Cơ bản] Phần 27: Template. Thư
                                        viện template chuẩn của C++. Vậy...</span>
                                </div>
                            </div>

                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <h2 id="footer-contact-us">Contact us</h2>
            <p><span class="social-icon-button">
                    <a class="fa-stack fa-2x" href="https://www.facebook.com/cowboycoding" target="_blank">
                        <i class="fa fa-square fa-stack-2x" style="color:#3b5998;"></i>
                        <i class="fa fa-facebook fa-stack" style="color:white;"></i>
                    </a>
                </span>
                <span class="social-icon-button">
                    <a class="fa-stack fa-2x" href="https://github.com/cowboycodervn" target="_blank">
                        <i class="fa fa-square fa-stack-2x" style="color:#333;"></i>
                        <i class="fa fa-github fa-stack" style="color:white;"></i>
                    </a>
                </span>
                <span class="social-icon-button">
                    <a class="fa-stack fa-2x" href="mailto:cowboycodervn@gmail.com" target="_blank">
                        <i class="fa fa-square fa-stack-2x" style="color:red;"></i>
                        <i class="fa fa-envelope fa-stack" style="color:white;"></i>
                    </a>
                </span>
                <p />
            <p class="footer-paragraph">&copy; 2017 Cowboy Coder</p>
            <p class="footer-paragraph">Hosted by GitHub Page. Powered by Jekyll.</p>
        </div>
    </footer>

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Bootstrap -->
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- Bootstrap Dropdown Hover JS -->
    <script src="/js/bootstrap-dropdownhover.min.js"></script>

    <!-- Make all links in content target _blank -->
    <script src="/js/blog_content.js"></script>

</body>

</html>